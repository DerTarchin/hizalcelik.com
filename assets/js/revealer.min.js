/**
 * Page Reveal Effect
 * http://www.codrops.com
 *
 * Licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * Copyright 2016, Codrops
 * http://www.codrops.com
 */
!function(e){"use strict";function t(e,t,r){var i;return function(){var n=this,o=arguments,a=function(){i=null,r||e.apply(n,o)},s=r&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(n,o)}}function r(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function i(e){this.options=r({},this.options),r(this.options,e),this._init()}var n=document.body,o={width:e.innerWidth,height:e.innerHeight},a={animations:Modernizr.cssanimations},s={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},l=s[Modernizr.prefixed("animation")],p=function(e,t){var r=function(e){if(a.animations){if(e.target!=this)return;this.removeEventListener(l,r)}t&&"function"==typeof t&&t.call()};a.animations?e.addEventListener(l,r):r()};i.prototype.options={nmbLayers:1,bgcolor:"#fff",onStart:function(e){return!1},onEnd:function(e){return!1}},i.prototype._init=function(){this._addLayers(),this.layers=[].slice.call(this.revealerWrapper.children),this._initEvents()},i.prototype._initEvents=function(){this.debounceResize=t(function(t){o={width:e.innerWidth,height:e.innerHeight}},10),e.addEventListener("resize",this.debounceResize)},i.prototype._addLayers=function(){this.revealerWrapper=document.createElement("div"),this.revealerWrapper.className="revealer";for(var e="",t=0;t<this.options.nmbLayers;++t){var r="string"==typeof this.options.bgcolor?this.options.bgcolor:this.options.bgcolor instanceof Array&&this.options.bgcolor[t]?this.options.bgcolor[t]:"#fff";e+='<div style="background:'+r+'" class="revealer__layer"></div>'}this.revealerWrapper.innerHTML=e,n.appendChild(this.revealerWrapper)},i.prototype.reveal=function(e,t,r){if(this.isAnimating)return!1;o={width:window.innerWidth,height:window.innerHeight},this.isAnimating=!0,this.direction=e,this.options.onStart(this.direction);var i,n,a;if("cornertopleft"===e||"cornertopright"===e||"cornerbottomleft"===e||"cornerbottomright"===e){var s=Math.sqrt(Math.pow(o.width,2)+Math.pow(o.height,2));i=n=s+"px","cornertopleft"===e?a="translate3d(-50%,-50%,0) rotate3d(0,0,1,135deg) translate3d(0,"+s+"px,0)":"cornertopright"===e?a="translate3d(-50%,-50%,0) rotate3d(0,0,1,-135deg) translate3d(0,"+s+"px,0)":"cornerbottomleft"===e?a="translate3d(-50%,-50%,0) rotate3d(0,0,1,45deg) translate3d(0,"+s+"px,0)":"cornerbottomright"===e&&(a="translate3d(-50%,-50%,0) rotate3d(0,0,1,-45deg) translate3d(0,"+s+"px,0)")}else"left"===e||"right"===e?(i="100vh",n="100vw",a="translate3d(-50%,-50%,0) rotate3d(0,0,1,"+("left"===e?90:-90)+"deg) translate3d(0,100%,0)"):("top"===e||"bottom"===e)&&(i="100vw",n="100vh",a="top"===e?"rotate3d(0,0,1,180deg)":"none");this.revealerWrapper.style.width=i,this.revealerWrapper.style.height=n,this.revealerWrapper.style.WebkitTransform=this.revealerWrapper.style.transform=a,this.revealerWrapper.style.opacity=1,$(this.revealerWrapper).addClass("revealer--"+e||"revealer--right"),$(this.revealerWrapper).addClass("revealer--animate");var l=this,h=0;this.layers.forEach(function(t){p(t,function(){++h,h===l.options.nmbLayers&&($(l.revealerWrapper).removeClass("revealer--"+e||"revealer--right"),$(l.revealerWrapper).removeClass("revealer--animate"),l.revealerWrapper.style.opacity=0,l.isAnimating=!1,l.options.onEnd(l.direction))})}),"function"==typeof r&&(this.callbacktimeout&&clearTimeout(this.callbacktimeout),this.callbacktimeout=setTimeout(r,t))},i.prototype.destroy=function(){e.removeEventListener("resize",this.debounceResize),n.removeChild(this.revealerWrapper)},e.Revealer=i}(window);